<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Share Something</title>
 <link href="http://username.github.io/" rel="self"/>
 <link href="http://username.github.io"/>
 <updated>2013-08-19T14:18:40+08:00</updated>
 <id>http://username.github.io</id>
 <author>
   <name>Oldman Li</name>
   <email>imoldman.com@gmail.com</email>
 </author>

 
 <entry>
   <title>fatal &#58; Needed a single revision 的解决办法</title>
   <link href="http://username.github.io/blog/2013/08/18/git-how-to-fix-needed-a-single-revision"/>
   <updated>2013-08-18T00:00:00+08:00</updated>
   <id>http://username.github.io/blog/2013/08/18/git-how-to-fix-needed-a-single-revision</id>
   <content type="html">&lt;p&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/pygments/native.css&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;问题&lt;/h2&gt;

&lt;p&gt;在 &lt;code&gt;Git Bash&lt;/code&gt; 中执行 &lt;code&gt;git submodule update --init --recursive&lt;/code&gt; 或之类的操作时可能会出现这样的提示：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fatal: Needed a single revision
Unable to find current revision in submodule path &#39;third_party/foobar&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2&gt;解决方案一&lt;/h2&gt;

&lt;p&gt;这个多半是由于 &lt;code&gt;third_party/forbar&lt;/code&gt; 这个 &lt;code&gt;submodule&lt;/code&gt; 的 &lt;code&gt;url&lt;/code&gt; 有所修改，处理步骤如下：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git submodule sync -- third_party/foobar
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git submodule update --init --recursive -- third_party/foobar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;

&lt;h2&gt;解决方案二&lt;/h2&gt;

&lt;p&gt;如果仍然出现 &lt;code&gt;fatal: Needed a single revision&lt;/code&gt; 的提示，则进行以下步骤&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;找到记载此 &lt;code&gt;submodule&lt;/code&gt; &lt;code&gt;url&lt;/code&gt; 的配置文件 &lt;code&gt;config&lt;/code&gt; ，将其内有关此 &lt;code&gt;submodule&lt;/code&gt;的配置删除。

&lt;ul&gt;
&lt;li&gt;假设根repo目录为 &lt;code&gt;C:/some/path&lt;/code&gt; , 则 &lt;code&gt;config&lt;/code&gt; 文件便位于 &lt;code&gt;C:/some/path/.git/config&lt;/code&gt;, 编辑之，删除5-6两行：&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ini&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;[submodule &amp;quot;third_party/boost&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ssh://wisp@git.lab.infra.mail:1046/data/git/wisp/boost.git&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;[submodule &amp;quot;third_party/gtest&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ssh://wisp@git.lab.infra.mail:1046/data/git/wisp/gtest.git&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;[submodule &amp;quot;third_party/foobar&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git://github.com/imoldman/asio.git&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;将这个 &lt;code&gt;submodule&lt;/code&gt; 的 &lt;code&gt;.git&lt;/code&gt; 目录删掉。

&lt;ul&gt;
&lt;li&gt;在本例中其目录为 &lt;code&gt;C:/some/path/.git/modules/third_party/foobar&lt;/code&gt;，将其删掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;将这个 &lt;code&gt;submodule&lt;/code&gt; 的 &lt;code&gt;workspace&lt;/code&gt; 目录删掉。

&lt;ul&gt;
&lt;li&gt;在本例中其目录为 &lt;code&gt;C:/some/path/third_party/foobar&lt;/code&gt;，将其删掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;执行 &lt;code&gt;git submodule update --init --recursive -- third_party/foobar&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;这样就可以解决了。&lt;/p&gt;
</content>
 </entry>
 
 
</feed>